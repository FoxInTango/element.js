(()=>{(()=>{var I=Object.defineProperty,f=(e,t)=>{for(var a in t)I(e,a,{get:t[a],enumerable:!0})},v={};f(v,{Application:()=>g,Element:()=>o,ElementAttributes:()=>u,ElementTreeWalker:()=>E,Event:()=>b,Module:()=>d,Namespace:()=>p,Task:()=>U,UIColor:()=>C,UIComponent:()=>M,UIContext:()=>m,UIElement:()=>l,UIElementAttributes:()=>h,UIEvent:()=>T,UIFrame:()=>R,UIImage:()=>F,UIImageGrid:()=>X,UIImageGridItem:()=>W,UILayout:()=>j,UILine:()=>_,UIStatus:()=>P,UIStyle:()=>O,UIText:()=>A,UITextAttributes:()=>w,UITextFormat:()=>N,UITextRange:()=>S,UITextRangeAttributes:()=>k,UITheme:()=>H,UIView:()=>L});var p=class{constructor(){this.componentMap=new Map,this.themeMap=new Map,this.statusMap=new Map,this.styleMap=new Map,this.frameMap=new Map,this.layoutMap=new Map,this.backgroundMap=new Map,this.colorMap=new Map,this.gradientMap=new Map,this.imageMap=new Map,this.spriteMap=new Map}},d=class{constructor(e){ElementJS.context.platform&&ElementJS.context.platform.loadModule(e)}},b=class{constructor(){}},E=class{constructor(e){this.handler=e,this.name="ElementTreeWalker"}walk(e,t){let a=t||this.handler;for(var s=0;s<e.childNodes.length;s++){var n=e.childNodes[s];a.handleElement(n,s,e),this.walk(n,a)}}},u=class{constructor(){this.master=this,this.id=null,this.elementName="element",this.subelements=new Array}},o=class{constructor(){if(arguments.length!=0&&arguments[0]==="super"){console.log("Element.js::super call.");return}else this.attributes=new u;this.application=null}setAttribute(e){}getAttribute(e){}set elementName(e){this.attributes&&(this.attributes.elementName=e)}get elementName(){return this.attributes?this.attributes.name:null}},c="web",i="node",x=class{constructor(e){this.renderTargetMap=new Map,this.host=e.host,this.vm=e.vm,this.WebWorker=e.WebWorker,this.loadWorker()}loadWorker(){this.host==c?this.worker=new Worker("./worker.js"):this.host==i&&this.WebWorker&&(this.worker=new this.WebWorker("./worker.js")),this.worker.onmessage=function(e){}}loadModule(e){if(!e.modulePath)return!1;if(this.host==c){let a=document.createElement("script");a.onerror=()=>{},a.onload=()=>{},a.src=e.modulePath;var t=document.getElementsByTagName("head")[0];(t||document.body).appendChild(a)}else this.host==i}loadImage(e){}loadAudio(e){}loadFile(e){switch(e.method){case"xhr":this.sendXHR(e);break;case"fetch":this.fetch(e);break;default:this.sendXHR(e)}}saveFile(e){}loadXML(e){let t=null;if(this.host==c?t=new DOMParser:this.host==i&&(t=new this.XML.DOMParser),!t)return!1;let a=t.parseFromString(e.content,"text/xml");if(a){let s={path:e.path,subelements:new Array,attributes:new Array};return this.handleXMLElement(a,s,null),s}}handleXMLElement(e,t,a){let s={elementName:e.nodeName,subelements:new Array,attributes:new Array},n=a;switch(t.subelements.push(s),e.nodeName){case"include":{let r=e.getAttribute("src");r&&r.length&&this.loadFile({path:r,handler:ElementJS,namespace:n})}break;case"require":{let r=e.getAttribute("src");r&&r.length&&this.loadFile({path:r,handler:ElementJS,namespace:n})}break;case"import":break;case"export":break;case"range":break;case"group":break;case"namespace":e.getAttribute("name")&&e.getAttribute("name").length&&(n=e.getAttribute("name"));break;case"color":break;case"r":break;case"g":break;case"b":break;case"a":break;case"image":break;case"sprite":break;case"background":break;case"theme":break;case"frame":break;case"x":break;case"y":break;case"width":break;case"height":break;case"layout":break;case"slot":break;case"view":break;case"canvas":break;case"component":break;case"extends":break;case"page":break;case"segment":break;case"string":break;case"text":break;default:break}console.log("Platform.js::handleXMLElement -- NodeName : "+e.nodeName+" NodeType: "+e.nodeType+" NodeContent: "+e.nodeValue+"NodeAttributes : "),console.log(e.attributes);for(let r=0;r<e.childNodes.length;r++)this.handleXMLElement(e.childNodes[r],s,n)}saveXML(){}loadJSON(){}saveJSON(){}echo(){console.log("---------------- Platform ----------------")}sendXHR(e){if(this.host==c){let t=new XMLHttpRequest;t.onload=()=>{if(t.status==200&&t.response!=null){let a=t.getResponseHeader("Content-Type");e.handler&&e.handler.handleFile({type:a,content:t.response,path:e.path,namespace:e.namespace})}},t.open("GET",e.path),t.send()}else this.host==i}fetch(e){}loopupRenderTarget(){}createRenderTarget(){}removeRenderTarget(){}updateRenderTarget(){}createObjectURL(){}removeObjectURL(){}},g=class extends o{constructor(){this.target=null}global(){return globalThis}boot(e){this.platform=new x(e)}elementWithID(e){return null}appendElement(){}removeElement(){}updateElement(){}apiEnabled(){}loadFile(){}saveFile(){}exploreFS(){}sendMessage(e,t){}dealMessage(e){}ws(){}xhr(){}download(e){}console(){return globalThis.console}loadXML(){}loadJSON(){}loadImage(){}},U=class{constructor(e,t){}},y=class{constructor(){this.name="Component",this.EventHandler=null}},M=class extends y{constructor(){this.name="UIComponent",this.UITree=null,this.EventHandler=null}},m=class{constructor(){this.elements=new Array,this.elementMap=new Map}appendElement(e){}insertElement(e,t){}removeElement(e){}render(e){switch(e.name){}}clear(){}clearRect(){}setClip(){}setLineStyle(){}drawLine(){}drawPath(){}drawText(){}drawImage(){}fill(){}stroke(){}},h=class extends u{constructor(){super(0),this.hidden=!1,this.visiable=!0,this.zIndex=0}},l=class extends o{constructor(){if(super("super"),arguments.length!=0&&arguments[0]==="super"){console.log("UIElement.js::super call.");return}else this.attributes=new h}},T=class extends b{constructor(){super()}},N=class{constructor(){}},w=class extends h{constructor(){this.ranges=new Array}},A=class extends l{constructor(){if(super("super"),arguments.length!=0&&arguments[0]==="super"){console.log("UIText.js::super call.");return}else this.attributes=new w}},k=class extends h{constructor(){super()}},S=class extends l{constructor(){if(super("super"),arguments.length!=0&&arguments[0]==="super"){console.log("UITextRange.js::super call.");return}else this.attributes=new k}},_=class extends l{constructor(){super()}},L=class extends l{constructor(e){super(),this.master=null,this.elementName="UIView"}},R=class{constructor(e,t,a,s){switch(arguments.length){case 1:break;case 4:this._x=e,this._y=t,this._w=a,this._h=s;break;default:return null}}},j=class{constructor(){this.frame=null}},C=class{constructor(e,t,a,s){this._r=e,this._g=t,this._b=a,this._a=s}set r(e){this._r=e}set g(e){this._g=e}set b(e){this._b=e}set a(e){this._a=e}get r(){return this._r}get g(){return this._g}get b(){return this._b}get a(){return this._a}},J=class{constructor(){this.url=null,this.status=null}},F=class{constructor(){this.attributes=new J}get URL(){return this.attributes.url}set URL(e){globalThis.ElementAPI.context.loadImage(e,function(t){t=="ready"?(this.attributes.url=e,this.attributes.status="ready"):(this.attributes.url=null,this.attributes.status="bad")})}},W=class{constructor(){}},X=class{constructor(){}},O=class{constructor(){this.border=null,this.background=null}},P=class{constructor(e,t,a){this.elementName="UIStatus",this.styleMap=null}},H=class{constructor(){this.statusMap=new Map,this.styleMap=new Map,this.frameMap=new Map,this.layoutMap=new Map,this.backgroundMap=new Map,this.colorMap=new Map,this.gradientMap=new Map,this.imageMap=new Map,this.spriteMap=new Map}},D=class extends g{constructor(){super(),this.elementName="ElementAPI",this.context=new m,this.moduleMap=new Map,this.fileHandlerMap=new Map,this.downloadMap=new Map,this.documentMap=new Map,this.namespaceMap=new Map,this.namespaceMap.set("default",new p),this.themeMap=new Map,this.colorMap=new Map,this.gradientMap=new Map,this.imageMap=new Map,this.spriteMap=new Map,this.statusMap=new Map,this.styleMap=new Map,this.layoutMap=new Map,this.componentMap=new Map,this.namespaceMap.forEach((e,t)=>{})}boot(e){this.context.boot(e),e.platform=="web"}appendNamespace(e){e.namespace}lookupNamespace(e){return this.namespaceMap.get(e)}appendTheme(e){}lookupTheme(e){}appendComponent(e){e&&e.name&&this.componentMap.set(e.name(),e)}removeComponent(e){}loadFile(e){this.context.platform&&this.context.platform.loadFile(e)}handleFile(e){switch(e.type){case"text/xml":this.loadDocument({type:"xml",content:e.content,path:e.path});break;case"application/xml":console.log("XHR XML Loaded : "),console.log(e.path),console.log(e.type),console.log(e.content);break;case"text/json":{let t=JSON.parse(e.content);console.log("XHR JSON Loaded"),console.log(e.path),console.log(e.type),console.log(e.content)}break;case"application/json":console.log(this.loadDocument({type:"json",content:e.content,namespace:e.namespace}));break;case"audio/mpeg":this.downloadMap.set(e.path,e.content);break;case"image/png":this.downloadMap.set(e.path,e.content);break;case"image/jpeg":this.downloadMap.set(e.path,e.content);break;case"application/javascript":this.downloadMap.set(e.path,e.content);break;default:break}}loadDocument(e){if(e.type=="xml")if(this.context.platform){let t=this.context.platform.loadXML(e);t&&(this.documentMap.set(e.path,t),console.log("new document created ."),console.log(this.documentMap))}else throw new Error("platform not ready");else if(e.type=="json")return JSON.parse(e.content)}handleDocument(e){if(e&&e.document)switch(e.document.instruction){case"uiml":break;case"mnml":break;default:break}}buildUI(e){}};globalThis.ElementJS||(globalThis.ElementJS=new D,ElementJS.Module=d,ElementJS.Element=o,ElementJS.UIElement=l,ElementJS.UIComponent=M,ElementJS.UIContext=m)})();})();
